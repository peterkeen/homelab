<%-
endpoints = []

all_host_services do |host, stack, service|
  endpoint = service.config.fetch(:"x-gatus", {})    
  web_conf = web_config_for_service(service)

  next unless endpoint.length > 0 || web_conf

  endpoint[:name] ||= service.name
  endpoint[:url] ||= "http://" + web_conf[:fqdn]
  endpoint[:interval] ||= "5m"
  endpoint[:conditions] ||= ["[STATUS] == 200"]
  endpoint[:alerts] ||= [
    {
      "type" => "email", 
    }
  ]
  endpoints << endpoint
end

-%>
<%= dump_yaml_without_symbols({"endpoints" => endpoints}) %>
